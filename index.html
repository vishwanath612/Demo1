<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Simple Car Game</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    background: #222;
    overflow: hidden;
    font-family: Arial, sans-serif;
}

/* Game Area */
.gameArea {
    width: 600px;
    height: 100vh;
    background: #444;
    margin: auto;
    position: relative;
    overflow: hidden;
    border-left: 5px solid white;
    border-right: 5px solid white;
}

/* Road lines */
.line {
    width: 10px;
    height: 100px;
    background: white;
    position: absolute;
    left: 195px;
}

/* Player Car */
.car {
    width: 50px;
    height: 100px;
    background: rgb(210, 104, 104);
    position: absolute;
    bottom: 120px;
    left: 175px;
    border-radius: 10px;
}

/* Enemy Cars */
.enemy {
    width: 50px;
    height: 100px;
    background: yellow;
    position: absolute;
    border-radius: 10px;
}

/* Score */
.score {
    position: absolute;
    top: 20px;
    left: 20px;
    color: white;
    font-size: 20px;
}

/* Start Screen */
.startScreen {
    position: absolute;
    background: white;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    padding: 20px;
    text-align: center;
    cursor: pointer;
}
</style>
</head>

<body>

<div class="gameArea"></div>
<div class="score">Score: 0</div>
<div class="startScreen">Click Here To Start<br>Use Arrow Keys To Move</div>

<script>
const score = document.querySelector('.score');
const startScreen = document.querySelector('.startScreen');
const gameArea = document.querySelector('.gameArea');

let player = { speed: 5, score: 0 };
let keys = { ArrowUp: false, ArrowDown: false, ArrowLeft: false, ArrowRight: false };

startScreen.addEventListener('click', start);

document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

function start() {
    startScreen.style.display = 'none';
    gameArea.innerHTML = "";
    player.start = true;
    player.score = 0;

    let car = document.createElement('div');
    car.setAttribute('class', 'car');
    gameArea.appendChild(car);

    player.x = car.offsetLeft;
    player.y = car.offsetTop;

    for (let i = 0; i < 5; i++) {
        let roadLine = document.createElement('div');
        roadLine.setAttribute('class', 'line');
        roadLine.y = i * 150;
        roadLine.style.top = roadLine.y + "px";
        gameArea.appendChild(roadLine);
    }

    for (let i = 0; i < 3; i++) {
        let enemy = document.createElement('div');
        enemy.setAttribute('class', 'enemy');
        enemy.y = (i + 1) * -300;
        enemy.style.left = Math.floor(Math.random() * 350) + "px";
        enemy.style.top = enemy.y + "px";
        gameArea.appendChild(enemy);
    }

    window.requestAnimationFrame(playGame);
}

function moveLines() {
    let lines = document.querySelectorAll('.line');
    lines.forEach(item => {
        if (item.y >= 700) item.y -= 750;
        item.y += player.speed;
        item.style.top = item.y + "px";
    });
}

function moveEnemy(car) {
    let enemies = document.querySelectorAll('.enemy');
    enemies.forEach(item => {
        if (isCollide(car, item)) {
            endGame();
        }
        if (item.y >= 750) {
            item.y = -300;
            item.style.left = Math.floor(Math.random() * 350) + "px";
        }
        item.y += player.speed;
        item.style.top = item.y + "px";
    });
}

function isCollide(a, b) {
    let aRect = a.getBoundingClientRect();
    let bRect = b.getBoundingClientRect();
    return !(
        aRect.bottom < bRect.top ||
        aRect.top > bRect.bottom ||
        aRect.right < bRect.left ||
        aRect.left > bRect.right
    );
}

function playGame() {
    let car = document.querySelector('.car');
    let road = gameArea.getBoundingClientRect();

    if (player.start) {
        moveLines();
        moveEnemy(car);

        if (keys.ArrowLeft && player.x > 0)
            player.x -= player.speed;
        if (keys.ArrowRight && player.x < (road.width - 50))
            player.x += player.speed;

        car.style.left = player.x + "px";

        player.score++;
        score.innerText = "Score: " + player.score;

        window.requestAnimationFrame(playGame);
    }
}

function endGame() {
    player.start = false;
    startScreen.style.display = 'block';
    startScreen.innerHTML = "Game Over<br>Final Score: " + player.score + "<br>Click To Restart";
}
</script>

</body>
</html>
